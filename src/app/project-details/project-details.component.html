<div class="min-h-screen bg-white">
  <!-- Loading State -->
  <div *ngIf="loading" class="flex justify-center flex-col gap-5 items-center py-20">
    <img src="/nav/Logo Black.svg" alt="Loading" class="block h-[60px]" />
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="flex justify-center items-center py-20">
    <div class="text-center">
      <h2 class="text-2xl font-bold text-primary mb-4">Project Not Found</h2>
      <p class="text-gray-600 mb-6 text-6xl font-exo">The project you're looking for doesn't exist or has been removed.</p>
      <button
        (click)="goBack()"
        class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors"
      >
        Back to Projects
      </button>
    </div>
  </div>

  <!-- Project Details -->
  <div *ngIf="project && !loading && !error" class=" mx-4 py-8">
    <!-- Header with Back Button -->
    <div class="flex items-center justify-between mb-8">
      <button
        (click)="goBack()"
        class="flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        Back to Projects
      </button>
    </div>

    <!-- Project Title and Description -->
    <div class="mb-12">
      <h1 class="text-5xl font-bold text-primary mb-6">{{ project.title }}</h1>
      <p class="text-4xl font-exo text-gray-700 leading-relaxed mb-8">{{ project.description }}</p>
    </div>


<!-- <div *ngIf="project.media && project.media.length > 0" class="mb-12 mx-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 auto-rows-auto">
  <div *ngFor="let mediaItem of project.media" class="w-full">
    <div class="relative overflow-hidden rounded-lg bg-black">
      <ng-container *ngIf="getMediaType(mediaItem.file_type) === 'video'; else imageBlock">
        <video
          autoplay
          muted
          loop
          playsinline
          class="w-full h-auto object-cover"
          [src]="mediaItem.file_link">
        </video>
      </ng-container>

      <ng-template #imageBlock>
        <img [src]="mediaItem.file_link" [alt]="project.title" class="w-full h-auto object-cover" />
      </ng-template>
    </div>

    <div class="mt-3">
      <h3 class="text-xl font-semibold">{{ project.title }}</h3>
      <p class="text-gray-500 text-sm">{{ project.description }}</p>
    </div>
  </div>
</div> -->
<div *ngIf="project.media && project.media.length > 0" class="mb-12 ">
  <ng-container *ngFor="let mediaItem of project.media; let i = index">
    <!-- Start new row wrapper for odd indices (1-col rows) or even indices that are divisible by 3 (start of 2-col rows) -->
    <div *ngIf="isRowStart(i)"
         [class]="getRowClass(i)"
         class="grid gap-5 auto-rows-auto mb-5">

      <!-- Current item -->
      <div class="w-full">
        <div class="relative overflow-hidden rounded-lg bg-black">
          <ng-container *ngIf="getMediaType(mediaItem.file_type) === 'video'; else imageBlock">
            <video
              autoplay
              muted
              loop
              playsinline
              class="w-full h-auto object-cover"
              [src]="mediaItem.file_link">
            </video>
          </ng-container>

          <ng-template #imageBlock>
            <img [src]="mediaItem.file_link" [alt]="project.title" class="w-full h-auto object-cover" />
          </ng-template>
        </div>
      </div>

      <!-- Second item for 2-column rows -->
      <div *ngIf="isTwoColumnRow(i) && project.media[i+1]" class="w-full">
        <div class="relative overflow-hidden rounded-lg bg-black">
          <ng-container *ngIf="getMediaType(project.media[i+1].file_type) === 'video'; else imageBlock2">
            <video
              autoplay
              muted
              loop
              playsinline
              class="w-full h-auto object-cover"
              [src]="project.media[i+1].file_link">
            </video>
          </ng-container>

          <ng-template #imageBlock2>
            <img [src]="project.media[i+1].file_link" [alt]="project.title" class="w-full h-auto object-cover" />
          </ng-template>
        </div>
      </div>
    </div>
  </ng-container>
</div>
    <!-- Additional Project Information -->
    <div class="border-t pt-12">
      <h3 class="text-2xl font-bold text-gray-900 mb-6">Project Details</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <h4 class="font-semibold text-gray-900 mb-2">Categories</h4>
          <div class="flex flex-wrap gap-2">
            <span
              *ngFor="let category of project.categories"
              class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm"
            >
              {{ category }}
            </span>
          </div>
        </div>
        <div>
          <h4 class="font-semibold text-gray-900 mb-2">Media Count</h4>
          <p class="text-gray-700">{{ project.media?.length || 0 }} items</p>
        </div>
      </div>
    </div>
  </div>
</div>
